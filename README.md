# Новостной Telegram-бот на основе алгоритмов машинного обучения

Проект представляет собой сервис рекомендации новостей, реализованный в виде Telegram-бота, который использует алгоритмы машинного обучения для персонализации контента. Система автоматически собирает новости с различных веб-сайтов, классифицирует их по категориям и предоставляет пользователям персонализированные рекомендации на основе их предпочтений.

## Содержание

- [Описание проекта](#описание-проекта)
- [Логическая схема базы данных](#логическая-схема-базы-данных)
- [Технологический стек](#технологический-стек)
- [Требования](#требования)
- [Настройка и запуск проекта](#настройка-и-запуск-проекта)
  - [Получение необходимых ключей](#получение-необходимых-ключей)
  - [Настройка переменных окружения](#настройка-переменных-окружения)
  - [Запуск базы данных](#запуск-базы-данных)
  - [Сборка и запуск приложения](#сборка-и-запуск-приложения)
- [Архитектура проекта](#архитектура-проекта)
- [Функциональные возможности](#функциональные-возможности)
- [Разработка и тестирование](#разработка-и-тестирование)

## Описание проекта

Новостной Telegram-бот предоставляет пользователям персонализированные новостные рекомендации на основе их предпочтений. Система использует алгоритмы машинного обучения для категоризации новостей и формирования релевантных рекомендаций.

Основные возможности:
- Автоматический сбор новостей с настроенных веб-сайтов
- Классификация новостей по категориям с использованием ML-моделей
- Персонализированные рекомендации на основе предпочтений пользователя
- Настраиваемые уведомления и расписание получения новостей
- Удобный интерфейс через Telegram-бота

## Логическая схема базы данных

![Логическая схема базы данных](https://private-us-east-1.manuscdn.com/sessionFile/pugkq3gvmGM5pUbXjfFtkV/sandbox/3bWLhi7glPyvuR0o003KNq-images_1747777532160_na1fn_L2hvbWUvdWJ1bnR1L3dvcmtzcGFjZS9pbWFnZXMvZGJfc2NoZW1h.png?Policy=eyJTdGF0ZW1lbnQiOlt7IlJlc291cmNlIjoiaHR0cHM6Ly9wcml2YXRlLXVzLWVhc3QtMS5tYW51c2Nkbi5jb20vc2Vzc2lvbkZpbGUvcHVna3EzZ3ZtR001cFViWGpmRnRrVi9zYW5kYm94LzNiV0xoaTdnbFB5dnVSMG8wMDNLTnEtaW1hZ2VzXzE3NDc3Nzc1MzIxNjBfbmExZm5fTDJodmJXVXZkV0oxYm5SMUwzZHZjbXR6Y0dGalpTOXBiV0ZuWlhNdlpHSmZjMk5vWlcxaC5wbmciLCJDb25kaXRpb24iOnsiRGF0ZUxlc3NUaGFuIjp7IkFXUzpFcG9jaFRpbWUiOjE3NjcyMjU2MDB9fX1dfQ__&Key-Pair-Id=K2HSFNDJXOU9YS&Signature=N7rR5TbPv3efNkYPKAl3PTQBLErbdYfkXuN9NbpZ5Y5ERzAJE6evX9xNIHohJzcBgDfV5uo7gQTssuwiK00PQd-1IQXxQ3DDwcCj3fOn~S2-pfNyjLqk2MMNXFUbT0fucRbpaqJ9edI4S88xgidjb2SoZbBjOduPoefy28~LRFZauwpoPWEs8gnNhfjX2xSwDzRDuUo53FwqQ~h0PE~HJY~awwYN-xj3md~3pvacIedNeINN2DCP5Cups~umgI763x4ocGp6xzmvytn-ucENvKtKv86nAvoaTlOUkqcdTvCqbyJf4l4rOKGNbK-~mpjNo4Z5MW~5dpe6hVjfpRm74g__)

Основные сущности:
- **User** - пользователи системы с их настройками и предпочтениями
- **Article** - новостные статьи, собранные с различных источников
- **Category** - категории для классификации новостей
- **Website** - источники новостей
- **NotificationSchedule** - настройки расписания уведомлений для пользователей

## Технологический стек

### Бэкенд
- **Java 17** - основной язык программирования
- **Spring Boot** - фреймворк для создания веб-приложений
- **Spring Data JPA** - для работы с базой данных
- **Spring Security** - для обеспечения безопасности
- **Flyway** - для миграции базы данных

### База данных
- **PostgreSQL** - реляционная СУБД для хранения данных

### Машинное обучение
- **LLama 3.2 90B** - модель машинного обучения для обработки естественного языка
- **ONNX Runtime** - для запуска моделей машинного обучения
- **Azure AI** - для доступа к облачным сервисам ИИ
- **OpenAI API** - для генерации и анализа текста

### Интеграции
- **Telegram Bot API** - для взаимодействия с пользователями через Telegram
- **Yandex API** - для дополнительных функций обработки данных

### Инструменты разработки
- **Maven** - система сборки проекта
- **Docker** - для контейнеризации приложения
- **Spring Boot Actuator** - для мониторинга приложения

## Требования

Для запуска проекта необходимы:
- JDK 17 или выше
- Maven 3.8 или выше
- Docker и Docker Compose
- Доступ к интернету для загрузки зависимостей
- Ключи API для внешних сервисов (Telegram, Yandex, LLama)

## Настройка и запуск проекта

### Получение необходимых ключей

#### 1. Telegram Bot API
1. Откройте Telegram и найдите @BotFather
2. Отправьте команду `/newbot` и следуйте инструкциям
3. После создания бота вы получите токен API, который выглядит примерно так: `123456789:ABCDefGhIJKlmNoPQRsTUVwxyZ`
4. Сохраните этот токен для дальнейшего использования

#### 2. Yandex API
1. Зарегистрируйтесь или войдите в [Yandex Cloud](https://cloud.yandex.ru/)
2. Создайте новый проект и сервисный аккаунт
3. Получите API-ключ и ID каталога
4. Сохраните эти данные для дальнейшего использования

#### 3. LLama 3.2 90B
1. Перейдите на сайт [id.io.net](https://id.io.net)
2. Зарегистрируйтесь или войдите в систему
3. Запросите доступ к модели LLama 3.2 90B
4. После одобрения получите API-ключ
5. Сохраните ключ для дальнейшего использования

### Настройка переменных окружения

Создайте файл `.env` в корневой директории проекта со следующим содержимым:

```
# Настройки базы данных
POSTGRES_USER=postgres
POSTGRES_PASSWORD=admin
POSTGRES_DB=news_recommendation

# Настройки Telegram
TELEGRAM_BOT_NAME=your_bot_name
TELEGRAM_BOT_TOKEN=your_telegram_token

# Настройки Yandex
YANDEX_TOKEN=your_yandex_token
YANDEX_FOLDER_ID=your_folder_id

# Настройки LLama
LLAMA_API_KEY=your_llama_api_key
```

Замените значения `your_*` на полученные ранее ключи и настройки.

### Запуск базы данных

Для запуска базы данных используйте Docker Compose:

```bash
docker-compose up -d
```

Это запустит контейнер PostgreSQL с настройками из файла `docker-compose.yml`.

### Сборка и запуск приложения

1. Клонируйте репозиторий:
```bash
git clone https://github.com/ivanmikhaylov1/news_recommendation_java.git
cd news_recommendation_java
```

2. Переключитесь на ветку `bugfix/ai`:
```bash
git checkout bugfix/ai
```

3. Соберите проект с помощью Maven:
```bash
./mvnw clean package -DskipTests
```

4. Запустите приложение:
```bash
java -jar target/demo-0.0.1-SNAPSHOT.jar
```

Или используйте Maven для запуска:
```bash
./mvnw spring-boot:run
```

5. Проверьте работу приложения, открыв в браузере:
```
http://localhost:8080/admin/health
```

Вы должны увидеть статус `{"status":"UP"}`, что означает успешный запуск приложения.

## Архитектура проекта

Проект построен на основе многослойной архитектуры:

1. **Слой представления** - Telegram Bot API для взаимодействия с пользователями
2. **Слой бизнес-логики** - сервисы для обработки запросов, парсинга новостей, рекомендаций
3. **Слой доступа к данным** - репозитории для работы с базой данных
4. **Слой интеграции** - взаимодействие с внешними API (Yandex, Azure, OpenAI)

Система использует планировщик задач для регулярного выполнения операций:
- Парсинг новостей с настроенной периодичностью
- Отправка уведомлений пользователям по расписанию
- Обновление моделей машинного обучения

## Функциональные возможности

### Парсинг новостей
- Автоматический сбор новостей с настроенных веб-сайтов
- Извлечение ключевой информации: заголовок, описание, дата публикации, URL
- Регулярное обновление новостной базы по расписанию

### Категоризация контента
- Автоматическая классификация новостей по категориям с использованием ML-моделей
- Возможность создания пользовательских категорий
- Связывание статей с релевантными категориями

### Персонализация
- Подписка пользователей на интересующие категории и источники
- Формирование персонализированной ленты новостей
- Адаптация рекомендаций на основе взаимодействия пользователя с контентом

### Уведомления
- Настраиваемое расписание уведомлений для каждого пользователя
- Отправка новостных дайджестов в удобное для пользователя время
- Возможность включения/отключения уведомлений

### Telegram-интерфейс
- Удобное взаимодействие через Telegram-бота
- Команды для управления подписками и настройками
- Интерактивные кнопки для навигации по контенту

## Разработка и тестирование

### Запуск тестов

Для запуска тестов используйте команду:
```bash
./mvnw test
```

### Профили запуска

Проект поддерживает несколько профилей запуска:
- `default` - стандартный профиль для разработки
- `test` - профиль для запуска тестов с использованием тестовых контейнеров

Для запуска с определенным профилем используйте:
```bash
./mvnw spring-boot:run -Dspring-boot.run.profiles=test
```

### Мониторинг

Для мониторинга приложения используйте Spring Boot Actuator, доступный по адресу:
```
http://localhost:8080/admin
```

Доступные эндпоинты:
- `/admin/health` - проверка состояния приложения
- `/admin/info` - информация о приложении
- `/admin/metrics` - метрики производительности
- `/admin/env` - переменные окружения

---

© 2025 Новостной рекомендательный сервис
